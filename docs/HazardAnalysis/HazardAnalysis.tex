\documentclass{article}

\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage{multirow}
\usepackage{array}
\usepackage{geometry}
\usepackage{adjustbox} 
\usepackage{caption}

\hypersetup{
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links (change box color with linkbordercolor)
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=cyan           % color of external links
}

\title{Hazard Analysis\\\progname}

\author{\authname}

\date{}

\input{../Comments}
\input{../Common}

\begin{document}

\maketitle
\thispagestyle{empty}

~\newpage

\pagenumbering{roman}

\begin{table}[hp]
\caption{Revision History} \label{TblRevisionHistory}
\begin{tabularx}{\textwidth}{llX}
\toprule
\textbf{Date} & \textbf{Developer(s)} & \textbf{Change}\\
\midrule
Oct 23 & All & First Draft\\
\bottomrule
\end{tabularx}
\end{table}

~\newpage

\tableofcontents

~\newpage

\pagenumbering{arabic}

\section{Introduction}

A hazard refers to any circumstance or occurence that has the potential to endanger, damage or cause a system to fail. Hazards may arise from errors in design, implementation or operation and may affect both the system and the user.

In this document, we will examine the possible risks related to the creation and application of a software system intended to replicate the functionality of a Continuous Variable Transmission (CVT) for the car of the McMaster Baja Racing team. By systematically examining the components and assumptions of the software, this hazard analysis attempts to make sure that the finished solution satisfies performance objectives and is robust enough to manage the intricacies inherent in CVT modeling.

\section{Scope and Purpose of Hazard Analysis}

The purpose of conducting a hazard analysis when designing software that aims to improve the
McMaster Baja team's Continuous Variable Transmission(CVT), is to identify and become aware of potential risks that could negatively affect the project. 
A hazard such as producing flawed simulations could delay the tuning process and create unreliable and incorrect outputs thus negatively impacting the vehicle performance and efficiency. 
These performance flaws could then lead to losses during Baja competitions. 
Through exploring the possible hazards involved, the project's code quality can be enhanced, potential risks can be mitigated and it ensures that the system will function as intended. 
\\\\
\noindent This document assumes that the user has access to a hard drive with sufficient storage space to download the software, an appropriate computer that meets the system requirements and a stable internet connection when downloading the software. 
\wss{You should say what \textbf{loss} could be incurred because of the
hazards.}

\section{System Boundaries and Components}

This system is divided into three main components:\\
~\newline
\textbf{User Interface Component}  
~\newline
This component is responsible for taking user input, providing the output to the user, and displaying the simulation of the 3D models.\\
~\newline
\textbf{Backend (Math) Component}  
~\newline
This component handles the mathematical calculations required for the program. The calculations will be done using Python and specifically the libraries NumPy and SciPy.\\
~\newline
\textbf{Simulation Component}  
~\newline
This component displays various models that are part of the CVT system, moving in accordance with the simulation.\\

\wss{Dividing the system into components will help you brainstorm the hazards.
You shouldn't do a full design of the components, just get a feel for the major
ones.  For projects that involve hardware, the components will typically include
each individual piece of hardware.  If your software will have a database, or an
important library, these are also potential components.}

\section{Critical Assumptions}

\wss{These assumptions that are made about the software or system.  You should
minimize the number of assumptions that remove potential hazards.  For instance,
you could assume a part will never fail, but it is generally better to include
this potential failure mode.}

\begin{itemize}
    \item [A1:] Users will not intentionally misuse the software or purposefully try to find unsafe settings.
    \item [A2:] The system that the software is running on will be not compromised and will function in a standard manner.
    \item [A3:] Third party software and libraries used are trusted to be safe and free of vulnerabilities.
    \item [A4:] Users will not leak information received from the application to other teams or organizations. 
    \item [A5:] The software will not be connecting to the internet or any other network.
    \item [A6:] The application wil not be collecting any user data or personal information.
\end{itemize}


\section{Failure Mode and Effect Analysis}

\wss{Include your FMEA table here. This is the most important part of this document.}
\wss{The safety requirements in the table do not have to have the prefix SR.
The most important thing is to show traceability to your SRS. You might trace to
requirements you have already written, or you might need to add new
requirements.}
\wss{If no safety requirement can be devised, other mitigation strategies can be
entered in the table, including strategies involving providing additional
documentation, and/or test cases.}


\newgeometry{left=1cm, right=1cm, top=1cm, bottom=1cm}
\begin{table}[htbp]
    \centering
    \caption{Failure Mode and Effects Analysis}
    \renewcommand{\arraystretch}{1.5} % Increase row height for readability
    
    % Use adjustbox to expand the table to full page width
    \begin{adjustbox}{max width=\textwidth}
    % Set the last four columns with fixed width (compact) and let the first three grow
    \begin{tabularx}{\textwidth}{|>{\raggedright\arraybackslash}X|>{\raggedright\arraybackslash}X|>{\raggedright\arraybackslash}X|p{0.8cm}|p{0.8cm}|p{0.8cm}|p{0.8cm}|p{0.8cm}|p{0.8cm}|p{0.8cm}|p{0.8cm}|}
    \hline
    \textbf{Process Step} & \textbf{Failure Mode} & \textbf{Possible Causes of Failure} & \multicolumn{4}{c|}{\textbf{Conventional Fractionation}} & \multicolumn{4}{c|}{\textbf{Hypofractionation}} \\
    \cline{4-11}
     &  &  & O & S & D & New & O & S & D & New \\
    \hline
    \multirow{4}{\linewidth}{1. Position Monitoring (PM) system estimates real-time target position} 
     & i. Target moves outside spatial tolerance, beam-hold not asserted & (a) Beam-hold not sent by monitoring system to tracking system & 3.4 & 5.7 & 4.0 & 5.1 & 3.3 & 7.1 & 3.6 & 4.8 \\
    \cline{2-11}
     & ii. Communication with PM system lost, target not asserted & (a) PM system failure & 3.7 & 7.1 & 2.6 & 4.9 & 3.7 & 8.4 & 2.6 & 5.2 \\
     &  & (b) Data transfer cable physically disconnected & & & & & & & & \\
    \cline{2-11}
     & iii. Error in coordinate system conversion & (a) System installation error & 1.7 & 8.6 & 4.3 & 5.3 & 1.7 & 9.3 & 3.9 & 5.5 \\
    \hline
    \multirow{2}{\linewidth}{2. Tracking system receives real-time target position} 
     & iv. Optimal leaf-fitting not achieved & (a) Complex motion, highly modulated field & 5.4 & 4.0 & 6.7 & 4.5 & 5.3 & 5.0 & 6.7 & 5.7 \\
    \cline{2-11}
     & v. Beam-hold not asserted when fluence map under jaws & (a) Software crash or failure & 2.9 & 4.9 & 3.7 & 5.8 & 2.6 & 6.1 & 3.9 & 5.9 \\
    \hline
    \multirow{2}{\linewidth}{3. MLC controller actuates leaf motion} 
     & vi. System latency outside expected range & (a) Hardware or software changes & 4.0 & 3.0 & 6.0 & 5.0 & 4.3 & 6.3 & 6.1 & 5.3 \\
     & vii. Too many beam-holds & (a) MLC leaves cannot keep up with target motion & 6.0 & 2.9 & 1.6 & 4.7 & 6.0 & 2.9 & 1.6 & 4.9 \\
    \hline
    \end{tabularx}
    \end{adjustbox}
    \end{table}
\restoregeometry

\section{Safety and Security Requirements}

\wss{Newly discovered requirements.  These should also be added to the SRS.  (A
rationale design process how and why to fake it.)}

\section{Roadmap}

\wss{Which safety requirements will be implemented as part of the capstone timeline?
Which requirements will be implemented in the future?}

\newpage{}

\section*{Appendix --- Reflection}

\wss{Not required for CAS 741}

\input{../Reflection.tex}

\begin{enumerate}
    \item What went well while writing this deliverable? 
    \item What pain points did you experience during this deliverable, and how
    did you resolve them?
    \item Which of your listed risks had your team thought of before this
    deliverable, and which did you think of while doing this deliverable? For
    the latter ones (ones you thought of while doing the Hazard Analysis), how
    did they come about?
    \item Other than the risk of physical harm (some projects may not have any
    appreciable risks of this form), list at least 2 other types of risk in
    software products. Why are they important to consider?
\end{enumerate}

\end{document}